<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="shortcut icon" href="./favicon.png" type="image/png" />
    <title>Юрий Микушов</title>
    <style>
      * {
        margin: 0;
        box-sizing: border-box;
      }

      .pdf-viewer {
        position: absolute;
        left: 0;
        top: 0;
      }

      .content {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 100px;
      }

      h1 {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 50px;
        line-height: 1.25;
        font-weight: bold;
      }

      button {
        padding: 20px 40px;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 30px;
        line-height: 1.25;
        font-weight: 500;
        background-color: #ffb300;
        border-radius: 8px;
        border-style: none;
        outline: none;
        cursor: pointer;
      }

      button:hover,
      button:focus {
        background-color: #f5ac00;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <embed
      id="pdf-viewer"
      class="pdf-viewer"
      src="./cv.pdf"
      type="application/pdf"
      width="100%"
      height="100%"
    />
    <main id="content" class="content">
      <h1>Резюме Юрия Микушова</h1>
      <button id="download">Скачать</button>
    </ь>
    <script>
      var getAcrobatInfo = function () {
        var getBrowserName = function () {
          return (this.name =
            this.name ||
            (function () {
              var userAgent = navigator
                ? navigator.userAgent.toLowerCase()
                : 'other'

              if (userAgent.indexOf('chrome') > -1) {
                return 'chrome'
              } else if (userAgent.indexOf('safari') > -1) {
                return 'safari'
              } else if (
                userAgent.indexOf('msie') > -1 ||
                userAgent.indexOf('trident') > -1
              ) {
                return 'ie'
              } else if (userAgent.indexOf('firefox') > -1) {
                return 'firefox'
              }
              return userAgent
            })())
        }

        var getActiveXObject = function (name) {
          try {
            return new ActiveXObject(name)
          } catch (e) {}
        }

        var getNavigatorPlugin = function (name) {
          try {
            for (key in navigator.plugins) {
              var plugin = navigator.plugins[key]
              if (plugin.name.toLowerCase().indexOf(name) > -1) {
                return plugin
              }
            }
          } catch (e) {}
        }

        var getPDFPlugin = function () {
          return (this.plugin =
            this.plugin ||
            (function () {
              if (getBrowserName() == 'ie') {
                return (
                  getActiveXObject('AcroPDF.PDF') ||
                  getActiveXObject('PDF.PdfCtrl')
                )
              } else {
                return (
                  getNavigatorPlugin('adobe acrobat') ||
                  getNavigatorPlugin('pdf') ||
                  getNavigatorPlugin('foxit reader')
                ) // works for all plugins which has word like 'adobe acrobat', 'pdf' and 'foxit reader'.
              }
            })())
        }

        var isAcrobatInstalled = function () {
          return !!getPDFPlugin()
        }

        var getAcrobatVersion = function () {
          try {
            var plugin = getPDFPlugin()

            if (getBrowserName() == 'ie') {
              var versions = plugin.GetVersions().split(',')
              var latest = versions[0].split('=')
              return parseFloat(latest[1])
            }

            if (plugin.version) return parseInt(plugin.version)
            return plugin.name
          } catch (e) {
            return null
          }
        }

        return {
          browser: getBrowserName(),
          acrobat: isAcrobatInstalled(),
          acrobatVersion: getAcrobatVersion(),
        }
      }
    </script>
    <script>
      function downloadFile(uri, name) {
        var link = document.createElement('a')
        link.setAttribute('download', name)
        link.href = uri
        document.body.appendChild(link)
        link.click()
        link.remove()
      }
    </script>
    <script>
      const pdfViewer = document.getElementById('pdf-viewer')
      const content = document.getElementById('content')

      const acrobatInfo = getAcrobatInfo()

      if (acrobatInfo.acrobat) {
        content.classList.add('hidden')
      } else {
        pdfViewer.classList.add('hidden')

        const download = document.getElementById('download')

        download.addEventListener('click', () => {
          downloadFile('./cv.pdf', 'Юрий Микушов.pdf')
        })
      }
    </script>
  </body>
</html>
